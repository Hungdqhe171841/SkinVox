<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Google Analytics Events</title>
</head>
<body>
    <h1>Google Analytics Events Test</h1>
    
    <div>
        <h2>Test Events</h2>
        <button onclick="testPageView()">Test Page View</button>
        <button onclick="testCustomEvent()">Test Custom Event</button>
        <button onclick="testEcommerceEvent()">Test Ecommerce Event</button>
        <button onclick="testBlogEvent()">Test Blog Event</button>
        <button onclick="testAREvent()">Test AR Event</button>
        <button onclick="testAdminEvent()">Test Admin Event</button>
    </div>
    
    <div>
        <h2>Debug Info</h2>
        <button onclick="checkGtag()">Check Gtag</button>
        <button onclick="checkDataLayer()">Check DataLayer</button>
        <button onclick="checkEnvironment()">Check Environment</button>
    </div>
    
    <div id="results"></div>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-C4NFL3C9TF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-C4NFL3C9TF');
      
      console.log('🔍 Google Analytics initialized with ID: G-C4NFL3C9TF');
      console.log('🔍 gtag function available:', typeof window.gtag);
      console.log('🔍 dataLayer available:', typeof window.dataLayer);
    </script>
    
    <script>
        function log(message) {
            console.log(message);
            document.getElementById('results').innerHTML += '<div>' + message + '</div>';
        }
        
        function testPageView() {
            log('🧪 Testing Page View Event...');
            
            if (typeof window.gtag === 'function') {
                window.gtag('event', 'page_view', {
                    page_title: 'Test Page View',
                    page_location: window.location.href,
                    page_path: window.location.pathname
                });
                log('✅ Page view event sent');
            } else {
                log('❌ Cannot send page view event - gtag not available');
            }
        }
        
        function testCustomEvent() {
            log('🧪 Testing Custom Event...');
            
            if (typeof window.gtag === 'function') {
                window.gtag('event', 'test_custom_event', {
                    event_category: 'Test',
                    event_label: 'Custom Event Test',
                    value: 1
                });
                log('✅ Custom event sent');
            } else {
                log('❌ Cannot send custom event - gtag not available');
            }
        }
        
        function testEcommerceEvent() {
            log('🧪 Testing Ecommerce Event...');
            
            if (typeof window.gtag === 'function') {
                window.gtag('event', 'view_item', {
                    currency: 'VND',
                    value: 100000,
                    items: [{
                        item_id: 'test_product_001',
                        item_name: 'Test Product',
                        item_category: 'Beauty',
                        quantity: 1,
                        price: 100000
                    }]
                });
                log('✅ Ecommerce event sent');
            } else {
                log('❌ Cannot send ecommerce event - gtag not available');
            }
        }
        
        function testBlogEvent() {
            log('🧪 Testing Blog Event...');
            
            if (typeof window.gtag === 'function') {
                window.gtag('event', 'blog_view', {
                    event_category: 'Blog',
                    event_label: 'Test Blog Post',
                    blog_id: 'test_blog_001',
                    blog_category: 'Beauty Tips'
                });
                log('✅ Blog event sent');
            } else {
                log('❌ Cannot send blog event - gtag not available');
            }
        }
        
        function testAREvent() {
            log('🧪 Testing AR Event...');
            
            if (typeof window.gtag === 'function') {
                window.gtag('event', 'ar_view', {
                    event_category: 'AR Feature',
                    event_label: 'Test AR Product',
                    product_type: 'Lipstick',
                    product_name: 'Test Lipstick'
                });
                log('✅ AR event sent');
            } else {
                log('❌ Cannot send AR event - gtag not available');
            }
        }
        
        function testAdminEvent() {
            log('🧪 Testing Admin Event...');
            
            if (typeof window.gtag === 'function') {
                window.gtag('event', 'admin_login', {
                    event_category: 'Admin',
                    event_label: 'Admin Login Test',
                    user_role: 'admin'
                });
                log('✅ Admin event sent');
            } else {
                log('❌ Cannot send admin event - gtag not available');
            }
        }
        
        function checkGtag() {
            log('🔍 Checking Gtag...');
            log('📊 gtag type: ' + typeof window.gtag);
            log('📊 gtag available: ' + (typeof window.gtag === 'function'));
        }
        
        function checkDataLayer() {
            log('🔍 Checking DataLayer...');
            log('📊 dataLayer type: ' + typeof window.dataLayer);
            log('📊 dataLayer length: ' + window.dataLayer.length);
            log('📊 dataLayer contents: ' + JSON.stringify(window.dataLayer, null, 2));
        }
        
        function checkEnvironment() {
            log('🔍 Checking Environment...');
            log('📊 Current URL: ' + window.location.href);
            log('📊 User Agent: ' + navigator.userAgent);
            log('📊 Screen Resolution: ' + screen.width + 'x' + screen.height);
        }
        
        // Auto-test on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                log('🔍 Auto-testing after page load...');
                checkGtag();
                checkDataLayer();
                testPageView();
            }, 2000);
        });
    </script>
</body>
</html>
